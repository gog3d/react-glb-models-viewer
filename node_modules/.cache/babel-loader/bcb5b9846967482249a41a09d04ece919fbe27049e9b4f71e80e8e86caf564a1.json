{"ast":null,"code":"import _slicedToArray from \"/home/gog3d/CODE/JS/1-projects/2-react/react-glb-models-viewer/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectWithoutProperties from \"/home/gog3d/CODE/JS/1-projects/2-react/react-glb-models-viewer/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"background\", \"scene\", \"blur\"];\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { useThree, useLoader, useFrame, createPortal, extend } from '@react-three/fiber';\nimport { CubeReflectionMapping, EquirectangularReflectionMapping, sRGBEncoding, LinearEncoding, Scene, WebGLCubeRenderTarget, HalfFloatType, CubeTextureLoader } from 'three';\nimport { RGBELoader, GroundProjectedEnv } from 'three-stdlib';\nimport { presetsObj } from '../helpers/environment-assets.js';\nvar CUBEMAP_ROOT = 'https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/';\nvar isRef = function isRef(obj) {\n  return obj.current && obj.current.isScene;\n};\nvar resolveScene = function resolveScene(scene) {\n  return isRef(scene) ? scene.current : scene;\n};\nfunction setEnvProps(background, scene, defaultScene, texture) {\n  var blur = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  var target = resolveScene(scene || defaultScene);\n  var oldbg = target.background;\n  var oldenv = target.environment; // @ts-ignore\n\n  var oldBlur = target.backgroundBlurriness || 0;\n  if (background !== 'only') target.environment = texture;\n  if (background) target.background = texture; // @ts-ignore\n\n  if (background && target.backgroundBlurriness !== undefined) target.backgroundBlurriness = blur;\n  return function () {\n    if (background !== 'only') target.environment = oldenv;\n    if (background) target.background = oldbg; // @ts-ignore\n\n    if (background && target.backgroundBlurriness !== undefined) target.backgroundBlurriness = oldBlur;\n  };\n}\nfunction EnvironmentMap(_ref) {\n  var scene = _ref.scene,\n    _ref$background = _ref.background,\n    background = _ref$background === void 0 ? false : _ref$background,\n    blur = _ref.blur,\n    map = _ref.map;\n  var defaultScene = useThree(function (state) {\n    return state.scene;\n  });\n  React.useLayoutEffect(function () {\n    if (map) return setEnvProps(background, scene, defaultScene, map, blur);\n  }, [defaultScene, scene, map, background, blur]);\n  return null;\n}\nfunction useEnvironment(_ref2) {\n  var _ref2$files = _ref2.files,\n    files = _ref2$files === void 0 ? ['/px.png', '/nx.png', '/py.png', '/ny.png', '/pz.png', '/nz.png'] : _ref2$files,\n    _ref2$path = _ref2.path,\n    path = _ref2$path === void 0 ? '' : _ref2$path,\n    _ref2$preset = _ref2.preset,\n    preset = _ref2$preset === void 0 ? undefined : _ref2$preset,\n    _ref2$encoding = _ref2.encoding,\n    encoding = _ref2$encoding === void 0 ? undefined : _ref2$encoding,\n    extensions = _ref2.extensions;\n  if (preset) {\n    if (!(preset in presetsObj)) throw new Error('Preset must be one of: ' + Object.keys(presetsObj).join(', '));\n    files = presetsObj[preset];\n    path = CUBEMAP_ROOT;\n  }\n  var isCubeMap = Array.isArray(files);\n  var loader = isCubeMap ? CubeTextureLoader : RGBELoader;\n  var loaderResult = useLoader(\n  // @ts-expect-error\n  loader, isCubeMap ? [files] : files, function (loader) {\n    loader.setPath(path);\n    if (extensions) extensions(loader);\n  });\n  var texture = isCubeMap ?\n  // @ts-ignore\n  loaderResult[0] : loaderResult;\n  texture.mapping = isCubeMap ? CubeReflectionMapping : EquirectangularReflectionMapping;\n  texture.encoding = (encoding !== null && encoding !== void 0 ? encoding : isCubeMap) ? sRGBEncoding : LinearEncoding;\n  return texture;\n}\nfunction EnvironmentCube(_ref3) {\n  var _ref3$background = _ref3.background,\n    background = _ref3$background === void 0 ? false : _ref3$background,\n    scene = _ref3.scene,\n    blur = _ref3.blur,\n    rest = _objectWithoutProperties(_ref3, _excluded);\n  var texture = useEnvironment(rest);\n  var defaultScene = useThree(function (state) {\n    return state.scene;\n  });\n  React.useLayoutEffect(function () {\n    return setEnvProps(background, scene, defaultScene, texture, blur);\n  }, [texture, background, scene, defaultScene, blur]);\n  return null;\n}\nfunction EnvironmentPortal(_ref4) {\n  var children = _ref4.children,\n    _ref4$near = _ref4.near,\n    near = _ref4$near === void 0 ? 1 : _ref4$near,\n    _ref4$far = _ref4.far,\n    far = _ref4$far === void 0 ? 1000 : _ref4$far,\n    _ref4$resolution = _ref4.resolution,\n    resolution = _ref4$resolution === void 0 ? 256 : _ref4$resolution,\n    _ref4$frames = _ref4.frames,\n    frames = _ref4$frames === void 0 ? 1 : _ref4$frames,\n    map = _ref4.map,\n    _ref4$background = _ref4.background,\n    background = _ref4$background === void 0 ? false : _ref4$background,\n    blur = _ref4.blur,\n    scene = _ref4.scene,\n    files = _ref4.files,\n    path = _ref4.path,\n    _ref4$preset = _ref4.preset,\n    preset = _ref4$preset === void 0 ? undefined : _ref4$preset,\n    extensions = _ref4.extensions;\n  var gl = useThree(function (state) {\n    return state.gl;\n  });\n  var defaultScene = useThree(function (state) {\n    return state.scene;\n  });\n  var camera = React.useRef(null);\n  var _React$useState = React.useState(function () {\n      return new Scene();\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 1),\n    virtualScene = _React$useState2[0];\n  var fbo = React.useMemo(function () {\n    var fbo = new WebGLCubeRenderTarget(resolution);\n    fbo.texture.type = HalfFloatType;\n    return fbo;\n  }, [resolution]);\n  React.useLayoutEffect(function () {\n    if (frames === 1) camera.current.update(gl, virtualScene);\n    return setEnvProps(background, scene, defaultScene, fbo.texture, blur);\n  }, [children, virtualScene, fbo.texture, scene, defaultScene, background, frames, gl]);\n  var count = 1;\n  useFrame(function () {\n    if (frames === Infinity || count < frames) {\n      camera.current.update(gl, virtualScene);\n      count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, createPortal( /*#__PURE__*/React.createElement(React.Fragment, null, children, /*#__PURE__*/React.createElement(\"cubeCamera\", {\n    ref: camera,\n    args: [near, far, fbo]\n  }), files || preset ? /*#__PURE__*/React.createElement(EnvironmentCube, {\n    background: true,\n    files: files,\n    preset: preset,\n    path: path,\n    extensions: extensions\n  }) : map ? /*#__PURE__*/React.createElement(EnvironmentMap, {\n    background: true,\n    map: map,\n    extensions: extensions\n  }) : null), virtualScene));\n}\nfunction EnvironmentGround(props) {\n  var _props$ground, _props$ground2, _scale, _props$ground3;\n  var textureDefault = useEnvironment(props);\n  var texture = props.map || textureDefault;\n  React.useMemo(function () {\n    return extend({\n      GroundProjectedEnvImpl: GroundProjectedEnv\n    });\n  }, []);\n  var args = React.useMemo(function () {\n    return [texture];\n  }, [texture]);\n  var height = (_props$ground = props.ground) == null ? void 0 : _props$ground.height;\n  var radius = (_props$ground2 = props.ground) == null ? void 0 : _props$ground2.radius;\n  var scale = (_scale = (_props$ground3 = props.ground) == null ? void 0 : _props$ground3.scale) !== null && _scale !== void 0 ? _scale : 1000;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EnvironmentMap, _extends({}, props, {\n    map: texture\n  })), /*#__PURE__*/React.createElement(\"groundProjectedEnvImpl\", {\n    args: args,\n    scale: scale,\n    height: height,\n    radius: radius\n  }));\n}\nfunction Environment(props) {\n  return props.ground ? /*#__PURE__*/React.createElement(EnvironmentGround, props) : props.map ? /*#__PURE__*/React.createElement(EnvironmentMap, props) : props.children ? /*#__PURE__*/React.createElement(EnvironmentPortal, props) : /*#__PURE__*/React.createElement(EnvironmentCube, props);\n}\nexport { Environment, EnvironmentCube, EnvironmentMap, EnvironmentPortal, useEnvironment };","map":{"version":3,"names":["_extends","React","useThree","useLoader","useFrame","createPortal","extend","CubeReflectionMapping","EquirectangularReflectionMapping","sRGBEncoding","LinearEncoding","Scene","WebGLCubeRenderTarget","HalfFloatType","CubeTextureLoader","RGBELoader","GroundProjectedEnv","presetsObj","CUBEMAP_ROOT","isRef","obj","current","isScene","resolveScene","scene","setEnvProps","background","defaultScene","texture","blur","arguments","length","undefined","target","oldbg","oldenv","environment","oldBlur","backgroundBlurriness","EnvironmentMap","_ref","_ref$background","map","state","useLayoutEffect","useEnvironment","_ref2","_ref2$files","files","_ref2$path","path","_ref2$preset","preset","_ref2$encoding","encoding","extensions","Error","Object","keys","join","isCubeMap","Array","isArray","loader","loaderResult","setPath","mapping","EnvironmentCube","_ref3","_ref3$background","rest","_objectWithoutProperties","_excluded","EnvironmentPortal","_ref4","children","_ref4$near","near","_ref4$far","far","_ref4$resolution","resolution","_ref4$frames","frames","_ref4$background","_ref4$preset","gl","camera","useRef","_React$useState","useState","_React$useState2","_slicedToArray","virtualScene","fbo","useMemo","type","update","count","Infinity","createElement","Fragment","ref","args","EnvironmentGround","props","_props$ground","_props$ground2","_scale","_props$ground3","textureDefault","GroundProjectedEnvImpl","height","ground","radius","scale","Environment"],"sources":["/home/gog3d/CODE/JS/1-projects/2-react/react-glb-models-viewer/node_modules/@react-three/drei/core/Environment.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { useThree, useLoader, useFrame, createPortal, extend } from '@react-three/fiber';\nimport { CubeReflectionMapping, EquirectangularReflectionMapping, sRGBEncoding, LinearEncoding, Scene, WebGLCubeRenderTarget, HalfFloatType, CubeTextureLoader } from 'three';\nimport { RGBELoader, GroundProjectedEnv } from 'three-stdlib';\nimport { presetsObj } from '../helpers/environment-assets.js';\n\nconst CUBEMAP_ROOT = 'https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/';\n\nconst isRef = obj => obj.current && obj.current.isScene;\n\nconst resolveScene = scene => isRef(scene) ? scene.current : scene;\n\nfunction setEnvProps(background, scene, defaultScene, texture, blur = 0) {\n  const target = resolveScene(scene || defaultScene);\n  const oldbg = target.background;\n  const oldenv = target.environment; // @ts-ignore\n\n  const oldBlur = target.backgroundBlurriness || 0;\n  if (background !== 'only') target.environment = texture;\n  if (background) target.background = texture; // @ts-ignore\n\n  if (background && target.backgroundBlurriness !== undefined) target.backgroundBlurriness = blur;\n  return () => {\n    if (background !== 'only') target.environment = oldenv;\n    if (background) target.background = oldbg; // @ts-ignore\n\n    if (background && target.backgroundBlurriness !== undefined) target.backgroundBlurriness = oldBlur;\n  };\n}\n\nfunction EnvironmentMap({\n  scene,\n  background = false,\n  blur,\n  map\n}) {\n  const defaultScene = useThree(state => state.scene);\n  React.useLayoutEffect(() => {\n    if (map) return setEnvProps(background, scene, defaultScene, map, blur);\n  }, [defaultScene, scene, map, background, blur]);\n  return null;\n}\nfunction useEnvironment({\n  files = ['/px.png', '/nx.png', '/py.png', '/ny.png', '/pz.png', '/nz.png'],\n  path = '',\n  preset = undefined,\n  encoding = undefined,\n  extensions\n}) {\n  if (preset) {\n    if (!(preset in presetsObj)) throw new Error('Preset must be one of: ' + Object.keys(presetsObj).join(', '));\n    files = presetsObj[preset];\n    path = CUBEMAP_ROOT;\n  }\n\n  const isCubeMap = Array.isArray(files);\n  const loader = isCubeMap ? CubeTextureLoader : RGBELoader;\n  const loaderResult = useLoader( // @ts-expect-error\n  loader, isCubeMap ? [files] : files, loader => {\n    loader.setPath(path);\n    if (extensions) extensions(loader);\n  });\n  const texture = isCubeMap ? // @ts-ignore\n  loaderResult[0] : loaderResult;\n  texture.mapping = isCubeMap ? CubeReflectionMapping : EquirectangularReflectionMapping;\n  texture.encoding = (encoding !== null && encoding !== void 0 ? encoding : isCubeMap) ? sRGBEncoding : LinearEncoding;\n  return texture;\n}\nfunction EnvironmentCube({\n  background = false,\n  scene,\n  blur,\n  ...rest\n}) {\n  const texture = useEnvironment(rest);\n  const defaultScene = useThree(state => state.scene);\n  React.useLayoutEffect(() => {\n    return setEnvProps(background, scene, defaultScene, texture, blur);\n  }, [texture, background, scene, defaultScene, blur]);\n  return null;\n}\nfunction EnvironmentPortal({\n  children,\n  near = 1,\n  far = 1000,\n  resolution = 256,\n  frames = 1,\n  map,\n  background = false,\n  blur,\n  scene,\n  files,\n  path,\n  preset = undefined,\n  extensions\n}) {\n  const gl = useThree(state => state.gl);\n  const defaultScene = useThree(state => state.scene);\n  const camera = React.useRef(null);\n  const [virtualScene] = React.useState(() => new Scene());\n  const fbo = React.useMemo(() => {\n    const fbo = new WebGLCubeRenderTarget(resolution);\n    fbo.texture.type = HalfFloatType;\n    return fbo;\n  }, [resolution]);\n  React.useLayoutEffect(() => {\n    if (frames === 1) camera.current.update(gl, virtualScene);\n    return setEnvProps(background, scene, defaultScene, fbo.texture, blur);\n  }, [children, virtualScene, fbo.texture, scene, defaultScene, background, frames, gl]);\n  let count = 1;\n  useFrame(() => {\n    if (frames === Infinity || count < frames) {\n      camera.current.update(gl, virtualScene);\n      count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, createPortal( /*#__PURE__*/React.createElement(React.Fragment, null, children, /*#__PURE__*/React.createElement(\"cubeCamera\", {\n    ref: camera,\n    args: [near, far, fbo]\n  }), files || preset ? /*#__PURE__*/React.createElement(EnvironmentCube, {\n    background: true,\n    files: files,\n    preset: preset,\n    path: path,\n    extensions: extensions\n  }) : map ? /*#__PURE__*/React.createElement(EnvironmentMap, {\n    background: true,\n    map: map,\n    extensions: extensions\n  }) : null), virtualScene));\n}\n\nfunction EnvironmentGround(props) {\n  var _props$ground, _props$ground2, _scale, _props$ground3;\n\n  const textureDefault = useEnvironment(props);\n  const texture = props.map || textureDefault;\n  React.useMemo(() => extend({\n    GroundProjectedEnvImpl: GroundProjectedEnv\n  }), []);\n  const args = React.useMemo(() => [texture], [texture]);\n  const height = (_props$ground = props.ground) == null ? void 0 : _props$ground.height;\n  const radius = (_props$ground2 = props.ground) == null ? void 0 : _props$ground2.radius;\n  const scale = (_scale = (_props$ground3 = props.ground) == null ? void 0 : _props$ground3.scale) !== null && _scale !== void 0 ? _scale : 1000;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EnvironmentMap, _extends({}, props, {\n    map: texture\n  })), /*#__PURE__*/React.createElement(\"groundProjectedEnvImpl\", {\n    args: args,\n    scale: scale,\n    height: height,\n    radius: radius\n  }));\n}\n\nfunction Environment(props) {\n  return props.ground ? /*#__PURE__*/React.createElement(EnvironmentGround, props) : props.map ? /*#__PURE__*/React.createElement(EnvironmentMap, props) : props.children ? /*#__PURE__*/React.createElement(EnvironmentPortal, props) : /*#__PURE__*/React.createElement(EnvironmentCube, props);\n}\n\nexport { Environment, EnvironmentCube, EnvironmentMap, EnvironmentPortal, useEnvironment };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}