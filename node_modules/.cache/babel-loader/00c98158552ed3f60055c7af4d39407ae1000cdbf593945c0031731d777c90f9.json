{"ast":null,"code":"import _classCallCheck from \"/home/gog3d/CODE/JS/1-projects/2-react/react-glb-models-viewer/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/gog3d/CODE/JS/1-projects/2-react/react-glb-models-viewer/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { createElementNS } from '../utils.js';\nimport { SRGBToLinear } from '../math/ColorManagement.js';\nvar _canvas;\nvar ImageUtils = /*#__PURE__*/function () {\n  function ImageUtils() {\n    _classCallCheck(this, ImageUtils);\n  }\n  _createClass(ImageUtils, null, [{\n    key: \"getDataURL\",\n    value: function getDataURL(image) {\n      if (/^data:/i.test(image.src)) {\n        return image.src;\n      }\n      if (typeof HTMLCanvasElement === 'undefined') {\n        return image.src;\n      }\n      var canvas;\n      if (image instanceof HTMLCanvasElement) {\n        canvas = image;\n      } else {\n        if (_canvas === undefined) _canvas = createElementNS('canvas');\n        _canvas.width = image.width;\n        _canvas.height = image.height;\n        var context = _canvas.getContext('2d');\n        if (image instanceof ImageData) {\n          context.putImageData(image, 0, 0);\n        } else {\n          context.drawImage(image, 0, 0, image.width, image.height);\n        }\n        canvas = _canvas;\n      }\n      if (canvas.width > 2048 || canvas.height > 2048) {\n        console.warn('THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons', image);\n        return canvas.toDataURL('image/jpeg', 0.6);\n      } else {\n        return canvas.toDataURL('image/png');\n      }\n    }\n  }, {\n    key: \"sRGBToLinear\",\n    value: function sRGBToLinear(image) {\n      if (typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement || typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement || typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n        var canvas = createElementNS('canvas');\n        canvas.width = image.width;\n        canvas.height = image.height;\n        var context = canvas.getContext('2d');\n        context.drawImage(image, 0, 0, image.width, image.height);\n        var imageData = context.getImageData(0, 0, image.width, image.height);\n        var data = imageData.data;\n        for (var i = 0; i < data.length; i++) {\n          data[i] = SRGBToLinear(data[i] / 255) * 255;\n        }\n        context.putImageData(imageData, 0, 0);\n        return canvas;\n      } else if (image.data) {\n        var _data = image.data.slice(0);\n        for (var _i = 0; _i < _data.length; _i++) {\n          if (_data instanceof Uint8Array || _data instanceof Uint8ClampedArray) {\n            _data[_i] = Math.floor(SRGBToLinear(_data[_i] / 255) * 255);\n          } else {\n            // assuming float\n\n            _data[_i] = SRGBToLinear(_data[_i]);\n          }\n        }\n        return {\n          data: _data,\n          width: image.width,\n          height: image.height\n        };\n      } else {\n        console.warn('THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.');\n        return image;\n      }\n    }\n  }]);\n  return ImageUtils;\n}();\nexport { ImageUtils };","map":{"version":3,"names":["createElementNS","SRGBToLinear","_canvas","ImageUtils","_classCallCheck","_createClass","key","value","getDataURL","image","test","src","HTMLCanvasElement","canvas","undefined","width","height","context","getContext","ImageData","putImageData","drawImage","console","warn","toDataURL","sRGBToLinear","HTMLImageElement","ImageBitmap","imageData","getImageData","data","i","length","slice","Uint8Array","Uint8ClampedArray","Math","floor"],"sources":["/home/gog3d/CODE/JS/1-projects/2-react/react-glb-models-viewer/node_modules/three/src/extras/ImageUtils.js"],"sourcesContent":["import { createElementNS } from '../utils.js';\nimport { SRGBToLinear } from '../math/ColorManagement.js';\n\nlet _canvas;\n\nclass ImageUtils {\n\n\tstatic getDataURL( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement === 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = createElementNS( 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons', image );\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n\tstatic sRGBToLinear( image ) {\n\n\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\tconst canvas = createElementNS( 'canvas' );\n\n\t\t\tcanvas.width = image.width;\n\t\t\tcanvas.height = image.height;\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\tconst imageData = context.getImageData( 0, 0, image.width, image.height );\n\t\t\tconst data = imageData.data;\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] / 255 ) * 255;\n\n\t\t\t}\n\n\t\t\tcontext.putImageData( imageData, 0, 0 );\n\n\t\t\treturn canvas;\n\n\t\t} else if ( image.data ) {\n\n\t\t\tconst data = image.data.slice( 0 );\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tif ( data instanceof Uint8Array || data instanceof Uint8ClampedArray ) {\n\n\t\t\t\t\tdata[ i ] = Math.floor( SRGBToLinear( data[ i ] / 255 ) * 255 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// assuming float\n\n\t\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdata: data,\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.' );\n\t\t\treturn image;\n\n\t\t}\n\n\t}\n\n}\n\nexport { ImageUtils };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}