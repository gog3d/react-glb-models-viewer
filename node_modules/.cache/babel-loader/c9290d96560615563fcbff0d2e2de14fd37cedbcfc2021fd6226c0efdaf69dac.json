{"ast":null,"code":"import { ImageUtils } from '../extras/ImageUtils.js';\nimport * as MathUtils from '../math/MathUtils.js';\nclass Source {\n  constructor() {\n    let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    this.isSource = true;\n    this.uuid = MathUtils.generateUUID();\n    this.data = data;\n    this.version = 0;\n  }\n  set needsUpdate(value) {\n    if (value === true) this.version++;\n  }\n  toJSON(meta) {\n    const isRootObject = meta === undefined || typeof meta === 'string';\n    if (!isRootObject && meta.images[this.uuid] !== undefined) {\n      return meta.images[this.uuid];\n    }\n    const output = {\n      uuid: this.uuid,\n      url: ''\n    };\n    const data = this.data;\n    if (data !== null) {\n      let url;\n      if (Array.isArray(data)) {\n        // cube texture\n\n        url = [];\n        for (let i = 0, l = data.length; i < l; i++) {\n          if (data[i].isDataTexture) {\n            url.push(serializeImage(data[i].image));\n          } else {\n            url.push(serializeImage(data[i]));\n          }\n        }\n      } else {\n        // texture\n\n        url = serializeImage(data);\n      }\n      output.url = url;\n    }\n    if (!isRootObject) {\n      meta.images[this.uuid] = output;\n    }\n    return output;\n  }\n}\nfunction serializeImage(image) {\n  if (typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement || typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement || typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    // default images\n\n    return ImageUtils.getDataURL(image);\n  } else {\n    if (image.data) {\n      // images of DataTexture\n\n      return {\n        data: Array.from(image.data),\n        width: image.width,\n        height: image.height,\n        type: image.data.constructor.name\n      };\n    } else {\n      console.warn('THREE.Texture: Unable to serialize Texture.');\n      return {};\n    }\n  }\n}\nexport { Source };","map":{"version":3,"names":["ImageUtils","MathUtils","Source","constructor","data","arguments","length","undefined","isSource","uuid","generateUUID","version","needsUpdate","value","toJSON","meta","isRootObject","images","output","url","Array","isArray","i","l","isDataTexture","push","serializeImage","image","HTMLImageElement","HTMLCanvasElement","ImageBitmap","getDataURL","from","width","height","type","name","console","warn"],"sources":["/home/gog3d/CODE/JS/1-projects/2-react/react-glb-models-viewer/node_modules/three/src/textures/Source.js"],"sourcesContent":["import { ImageUtils } from '../extras/ImageUtils.js';\nimport * as MathUtils from '../math/MathUtils.js';\n\nclass Source {\n\n\tconstructor( data = null ) {\n\n\t\tthis.isSource = true;\n\n\t\tthis.uuid = MathUtils.generateUUID();\n\n\t\tthis.data = data;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.images[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.images[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\t\t\tuuid: this.uuid,\n\t\t\turl: ''\n\t\t};\n\n\t\tconst data = this.data;\n\n\t\tif ( data !== null ) {\n\n\t\t\tlet url;\n\n\t\t\tif ( Array.isArray( data ) ) {\n\n\t\t\t\t// cube texture\n\n\t\t\t\turl = [];\n\n\t\t\t\tfor ( let i = 0, l = data.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( data[ i ].isDataTexture ) {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ].image ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// texture\n\n\t\t\t\turl = serializeImage( data );\n\n\t\t\t}\n\n\t\t\toutput.url = url;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.images[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n}\n\nfunction serializeImage( image ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t// default images\n\n\t\treturn ImageUtils.getDataURL( image );\n\n\t} else {\n\n\t\tif ( image.data ) {\n\n\t\t\t// images of DataTexture\n\n\t\t\treturn {\n\t\t\t\tdata: Array.from( image.data ),\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height,\n\t\t\t\ttype: image.data.constructor.name\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Texture: Unable to serialize Texture.' );\n\t\t\treturn {};\n\n\t\t}\n\n\t}\n\n}\n\nexport { Source };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}